<section class="sectionFormArticle">

  <div class="headerForm">
    <h1>Nouvel article</h1>
    <p>Rédige un article de vulgarisation scientifique en sciences du sport.</p>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="formArticle">

    <!-- Infos générales -->
    <div class="formCard">
      <h2>Informations générales</h2>

      <div class="formGroup">
        <label for="titre">Titre</label>
        <input type="text" id="titre" formControlName="titre">
      </div>

      <div class="formGroup">
        <label for="categorie">Catégorie</label>
        <input type="text" id="categorie" formControlName="categorie">
      </div>
    </div>

    <!-- Introduction -->
    <div class="formCard">
      <h2>Introduction</h2>

      <div class="formGroup">
        <label for="stIntroArticle">Sous-titre</label>
        <input type="text" id="stIntroArticle" formControlName="stIntroArticle">
      </div>

      <div class="formGroup">
        <label for="texteIntroArticle">Texte</label>
        <textarea id="texteIntroArticle" formControlName="texteIntroArticle" rows="5"></textarea>
      </div>
    </div>

    <!-- Sections -->
    <div class="formCard" *ngFor="let section of [1,2,3]">
      <h2>Section {{ section }}</h2>

      <div class="formGroup">
        <label [for]="'st' + section + 'Article'">Sous-titre</label>
        <input [id]="'st' + section + 'Article'"
               [formControlName]="'st' + section + 'Article'">
      </div>

      <div class="formGroup">
        <label [for]="'texte' + section + 'Article'">Texte</label>
        <textarea [id]="'texte' + section + 'Article'"
                  [formControlName]="'texte' + section + 'Article'"
                  rows="5"></textarea>
      </div>
    </div>

    <!-- Conclusion -->
    <div class="formCard">
      <h2>Conclusion</h2>

      <div class="formGroup">
        <label for="stConclusionArticle">Sous-titre</label>
        <input type="text" id="stConclusionArticle" formControlName="stConclusionArticle">
      </div>

      <div class="formGroup">
        <label for="texteConclusionArticle">Texte</label>
        <textarea id="texteConclusionArticle"
                  formControlName="texteConclusionArticle"
                  rows="5"></textarea>
      </div>
    </div>

    <!-- Image -->
    <div class="formCard">
      <h2>Vignette</h2>

      <input type="file"
             id="image"
             (change)="onFileChange($event)"
             accept="image/*">

      @if (imagePreview()) {
        <div class="previewContainer">
          <img [src]="imagePreview()" class="imagePreview">
        </div>
      }
    </div>

    <button type="submit" class="btnSubmit" [disabled]="form.invalid">
      Publier l’article
    </button>

  </form>

</section>
